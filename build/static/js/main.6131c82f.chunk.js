(this.webpackJsonpbulk_mail_schedule=this.webpackJsonpbulk_mail_schedule||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(6),i=a.n(r),l=(a(85),a(165)),o=a(72),c=a(27),u=a.n(c),m=a(45),d=a(36),p=a(37),h=a(43),f=a(38),v=a(44),b=a(65),g=a.n(b),E=a(66),y=a.n(E),x=a(67),S=a(10),k=a(74),w=a(154),j=a(171),C=a(155),O=a(122),F=a(169),M=a(160),W=a(159),R=a(166),T=a(173),A=a(161),I=a(163),B=a(5),N=a(170),L=a(156),q=a(162),H=a(164),_=(a(114),a(151)),D=a(168),K=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).props=void 0,a.props=e,a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(_.a,{control:s.a.createElement("div",null,s.a.createElement(D.a,{checked:this.props.checked,value:this.props.file.name,onChange:this.props.onChange})),label:"".concat(this.props.index+1,": ").concat(this.props.file.name)})}}]),t}(n.Component);S.a.configure();var P=Object(B.a)((function(e){return Object(N.a)({root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}})}))(k.a),z={root:{height:"100vh"},image:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},avatar:{margin:"4px",marginTop:"1px",backgroundColor:"#2980b9",color:"#fff"},form:{width:"100%",marginTop:"8px"},submit:{margin:"24px 0px 16px"},button:{margin:"4px",width:"31%",textAlign:"center"},input:{display:"none"}},Y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={user:"ewssoftwares@gmail.com",pass:"password",server:"smtp.gmail.com",port:587,tls:!1,subject:"EWS Software",fromEmail:"ewssoftwares@gmail.com",fromName:"EWS Software",testRecepients:["ewssoftwares@gmail.com"],bulkRecepients:[],body:"Welcome to EWS Software.",isHTML:!1,limit:1,files:[],selectedFiles:[],sendAvailable:!0,useSpaceKey:!1,totalSentMails:0,spaceMode:!1,disableButtons:!1,cronExpression:""},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"loadEmailsFromFile",value:function(e){return new Promise((function(t,a){try{var n=new FileReader;n.onloadend=Object(m.a)(u.a.mark((function e(){var a,s,r,i,l,o,c,m,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.result,e.next=3,y()().fromString(a);case 3:for(s=e.sent,r=[],i=!0,l=!1,o=void 0,e.prev=8,c=s[Symbol.iterator]();!(i=(m=c.next()).done);i=!0)d=m.value,p=d[Object.getOwnPropertyNames(d)[0]],r.push(p);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),l=!0,o=e.t0;case 16:e.prev=16,e.prev=17,i||null==c.return||c.return();case 19:if(e.prev=19,!l){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:t(r);case 25:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])}))),n.readAsBinaryString(e)}catch(s){a(s)}}))}},{key:"sendmail",value:function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,s,r,i,l,o,c=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.a.dismiss(),this.setState({sendAvailable:!1}),n={host:this.state.server,port:this.state.port,secure:this.state.tls?this.state.tls:165===this.state.port,auth:{user:this.state.user,pass:this.state.pass},from:'"'.concat(this.state.fromName,'" <').concat(this.state.fromEmail,">"),to:t,subject:this.state.subject,text:this.state.isHTML?void 0:this.state.body,html:this.state.isHTML?this.state.body:void 0,cronExpression:"",limit:this.state.limit},s="",s="/send",!a||!this.state.cronExpression){e.next=13;break}if(x.validate(this.state.cronExpression)){e.next=11;break}return Object(S.a)("Invalid cron expression",{type:"error"}),e.abrupt("return");case 11:n.cronExpression=this.state.cronExpression,n.to=t.concat(this.state.bulkRecepients);case 13:return r=null,e.prev=14,e.next=17,g.a.post(s,n);case 17:r=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),r=e.t0.response;case 23:if(e.prev=23,!(i=r.data.code)){e.next=30;break}return S.a.dismiss(),Object(S.a)("An error has occured: ".concat(i),{type:"error",autoClose:!1}),this.setState({sendAvailable:!0}),e.abrupt("return");case 30:if(!this.state.cronExpression){e.next=34;break}return!r.data.error&&r.data.id?Object(S.a)("Scheduled successfully! [".concat(r.data.id,"]"),{type:"info"}):(Object(S.a)("Failed to schedule",{type:"error"}),console.log(r.data)),this.setState({bulkRecepients:[]}),e.abrupt("return");case 34:return r.data.length?(l=r.data.reduce((function(e,t){return e+t.accepted.length}),0),o=r.data.reduce((function(e,t){return e+t.rejected.length}),0),this.setState((function(e){return{totalSentMails:e.totalSentMails+l}}),(function(){S.a.dismiss(),Object(S.a)("".concat(c.state.totalSentMails," emails were sent!"),{type:"info",autoClose:!1})})),o&&(S.a.dismiss(),Object(S.a)("".concat(o," emails were not sent!"),{type:"warning",autoClose:!1}))):(S.a.dismiss(),Object(S.a)("No emails were sent!",{type:"warning",autoClose:!1})),this.setState({sendAvailable:!0}),e.finish(23);case 37:case"end":return e.stop()}}),e,this,[[14,20,23,37]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"test",value:function(){var e=this.state.testRecepients;e.length?this.sendmail([e[0]]):Object(S.a)("No recipients defined",{type:"error"})}},{key:"bulk",value:function(){var e=this,t=this.state,a=t.bulkRecepients,n=t.limit,s=a.splice(n);this.setState({bulkRecepients:s,useSpaceKey:!!this.state.spaceMode||this.state.useSpaceKey},(function(){a.length?e.sendmail(a,!0):Object(S.a)("No recipients defined",{type:"error"})})),this.test()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(w.a,{container:!0,component:"main",style:z.root},s.a.createElement(j.a,null),s.a.createElement(w.a,{item:!0,xs:12,sm:8,md:3,style:z.image},s.a.createElement("div",{style:{margin:"64px 32px",display:"flex",alignItems:"center",flexDirection:"column"}},s.a.createElement(C.a,{style:z.avatar},s.a.createElement(L.a,null)),s.a.createElement(O.a,{component:"h1",variant:"h5"},"SMTP Credentials"),s.a.createElement("div",{style:z.form},s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.server,id:"server",label:"Server",name:"server",autoFocus:!0,onChange:function(t){e.setState({server:t.target.value})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.port.toString(),name:"port",label:"Port",type:"number",id:"port",onChange:function(t){e.setState({port:parseInt(t.target.value)})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.user,id:"email",label:"User",name:"email",autoComplete:"email",onChange:function(t){e.setState({user:t.target.value})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.pass,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){e.setState({pass:t.target.value})}}),s.a.createElement(M.a,{style:{float:"left",marginTop:"3%"},component:"legend"},"TLS"),s.a.createElement(W.a,{style:{float:"right",width:"100%"}},s.a.createElement(R.a,{value:this.state.tls?1:0,onChange:function(t){e.setState({tls:1===parseInt(t.target.value)})},input:s.a.createElement(P,{name:"tls",id:"tls"})},s.a.createElement(T.a,{value:0},"No"),s.a.createElement(T.a,{value:1},"Yes")))))),s.a.createElement(w.a,{item:!0,xs:!1,sm:4,md:5,component:A.a},s.a.createElement("div",{style:{margin:"64px 32px",display:"flex",alignItems:"center",flexDirection:"column"},tabIndex:this.state.useSpaceKey?0:void 0,onKeyDown:function(t){32===t.keyCode&&e.state.useSpaceKey&&e.bulk()}},s.a.createElement(C.a,{style:z.avatar},s.a.createElement(q.a,null)),s.a.createElement(O.a,{component:"h1",variant:"h5"},"Mail Details"),s.a.createElement("div",{style:z.form},s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.subject,id:"subject",label:"Subject",name:"subject",onChange:function(t){e.setState({subject:t.target.value})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.fromEmail,name:"from_email",label:"From (Email)",id:"from_email",onChange:function(t){e.setState({fromEmail:t.target.value})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.fromName,name:"from_name",label:"From (Name)",id:"from_name",onChange:function(t){e.setState({fromName:t.target.value})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,value:this.state.testRecepients.join("\n"),name:"recepients",label:"Recepients",id:"recepients",multiline:!0,rows:6,onKeyPress:function(t){if("Enter"===t.key){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n=e.state.testRecepients;n=n.filter((function(e){return e.match(a)})),e.setState({testRecepients:n})}},onChange:function(t){var a=t.target.value.split("\n");e.setState({testRecepients:a})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.body,name:"body",label:"Body",id:"body",multiline:!0,rows:8,onChange:function(t){e.setState({body:t.target.value})}}),s.a.createElement(M.a,{style:{float:"left",marginTop:"3%"},component:"legend"},"HTML"),s.a.createElement(W.a,{style:{float:"right",width:"100%"}},s.a.createElement(R.a,{value:this.state.isHTML?1:0,onChange:function(t){e.setState({isHTML:1===parseInt(t.target.value)})},input:s.a.createElement(P,{name:"isHTML",id:"isHTML"})},s.a.createElement(T.a,{value:0},"No"),s.a.createElement(T.a,{value:1},"Yes"))),s.a.createElement(M.a,{style:{float:"left",marginTop:"3%"},component:"legend"},"Space Mode"),s.a.createElement(W.a,{style:{float:"right",width:"100%"}},s.a.createElement(R.a,{value:this.state.spaceMode?1:0,onChange:function(t){e.setState({spaceMode:1===parseInt(t.target.value)})},input:s.a.createElement(P,{name:"spaceMode",id:"spaceMode"})},s.a.createElement(T.a,{value:0},"No"),s.a.createElement(T.a,{value:1},"Yes"))),s.a.createElement(M.a,{style:{float:"left",marginTop:"3%"},component:"legend"},"Disable Buttons"),s.a.createElement(W.a,{style:{float:"right",width:"100%"}},s.a.createElement(R.a,{value:this.state.disableButtons?1:0,onChange:function(t){e.setState({disableButtons:1===parseInt(t.target.value)})},input:s.a.createElement(P,{name:"disableButtons",id:"disableButtons"})},s.a.createElement(T.a,{value:0},"No"),s.a.createElement(T.a,{value:1},"Yes"))),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.limit.toString(),name:"limit",label:"Limit (max 25000)",type:"number",id:"limit",onChange:function(t){e.setState({limit:parseInt(t.target.value)})}}),s.a.createElement(F.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:this.state.cronExpression,name:"cron-expression",label:"Cron Expression",type:"text",id:"limit",onChange:function(t){e.setState({cronExpression:t.target.value})}}),s.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},s.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{margin:"24px 0px 16px",width:"30%"},onClick:this.test.bind(this),disabled:this.state.disableButtons&&!this.state.sendAvailable},"Test"),s.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{margin:"24px 0px 16px",width:"30%"},onClick:function(){e.bulk()},disabled:this.state.disableButtons&&!this.state.sendAvailable},this.state.cronExpression?"Schedule":"Bulk"))))),s.a.createElement(w.a,{item:!0,xs:12,sm:8,md:4,style:z.image},s.a.createElement("div",{style:{margin:"64px 32px",display:"flex",alignItems:"center",flexDirection:"column"}},s.a.createElement(C.a,{style:z.avatar},s.a.createElement(H.a,null)),s.a.createElement(O.a,{component:"h1",variant:"h5"},"Address List"),s.a.createElement("div",{style:z.form},s.a.createElement("input",{accept:"text/csv",style:{display:"none"},id:"file-chooser",type:"file",multiple:!0,onChange:function(t){var a=e.state,n=a.files,s=a.selectedFiles;n=n.concat(Array.from(t.target.files));for(var r=0;r<n.length;r++)s.push(!0);e.setState({files:n,selectedFiles:s})}}),s.a.createElement("label",{htmlFor:"file-chooser"},s.a.createElement(I.a,{variant:"contained",component:"span",style:z.button},"Choose")),s.a.createElement("label",null,s.a.createElement(I.a,{variant:"contained",component:"span",style:z.button,onClick:Object(m.a)(u.a.mark((function t(){var a,n,s,r,i,l,o,c,m,d,p,h,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],n=0,s=0,r=0;case 3:if(!(r<e.state.files.length)){t.next=32;break}if(i=e.state.files[r],!e.state.selectedFiles[r]){t.next=29;break}return t.next=8,e.loadEmailsFromFile(i);case 8:for(l=t.sent,o=!0,c=!1,m=void 0,t.prev=12,d=l[Symbol.iterator]();!(o=(p=d.next()).done);o=!0)h=p.value,a.push(h),s++;t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),c=!0,m=t.t0;case 20:t.prev=20,t.prev=21,o||null==d.return||d.return();case 23:if(t.prev=23,!c){t.next=26;break}throw m;case 26:return t.finish(23);case 27:return t.finish(20);case 28:n++;case 29:r++,t.next=3;break;case 32:f=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a=a.filter((function(e){return e&&e.match(f)})),S.a.dismiss(),Object(S.a)("Loaded ".concat(s," email addresses from ").concat(n," ").concat(1===n?"file":"files"),{type:"success"}),e.setState({bulkRecepients:a});case 37:case"end":return t.stop()}}),t,null,[[12,16,20,28],[21,,23,27]])})))},"Load")),s.a.createElement("label",null,s.a.createElement(I.a,{variant:"contained",component:"span",style:z.button,onClick:function(){if(e.state.selectedFiles.some((function(e){return!!e}))){for(var t=e.state,a=t.files,n=t.selectedFiles,s=[],r=[],i=0;i<n.length;i++){n[i]||(s.push(a[i]),r.push(n[i]))}e.setState({files:s,selectedFiles:r})}else S.a.dismiss(),Object(S.a)("You must select at least one file to delete!",{type:"error"})}},"Delete")),this.state.files.map((function(t,a){return s.a.createElement(K,{file:t,key:a,index:a,checked:e.state.selectedFiles[a],onChange:function(){var t=e.state.selectedFiles;t[a]=!t[a],e.setState({selectedFiles:t})}})})))))))}}]),t}(n.Component),U=function(){return s.a.createElement(l.a,{theme:Object(o.a)({palette:{type:"dark"}})},s.a.createElement(Y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,a){e.exports=a(121)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.6131c82f.chunk.js.map